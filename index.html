<!DOCTYPE html>
<html>
<head>
  <title>Routing Demo</title>
  <meta charset="utf-8" />
  <style>
    #map { height: 500px; width: 100%; }
    body { font-family: sans-serif; padding: 20px; }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

<h2>üöó Route Between Two Points</h2>

<button onclick="drawRoute()">Draw Route</button>
<div id="map"></div>

<script>
  const map = L.map('map').setView([28.6139, 77.2090], 6); // India center

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18
  }).addTo(map);

  let routeLine;

  async function drawRoute() {
    const start = [77.2090, 28.6139]; // Delhi [lng, lat]
    const end = [72.8777, 19.0760];   // Mumbai [lng, lat]

    const coords = [start, end];
    const apiKey = '5b3ce3597851110001cf6248c9d85902f070459d880c6a22a6e467d6';
    const proxy = 'https://corsproxy.io/?';
    const endpoint = 'https://api.openrouteservice.org/v2/directions/driving-car';
    const url = proxy + encodeURIComponent(endpoint);

    try {
      const response = await fetch(url, {
        method: 'POST',
        headers: {
          'Authorization': apiKey,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ coordinates: coords })
      });

      const data = await response.json();

      const routeCoords = data.features[0].geometry.coordinates.map(coord => [coord[1], coord[0]]);

      if (routeLine) map.removeLayer(routeLine);

      routeLine = L.polyline(routeCoords, { color: 'blue', weight: 4 }).addTo(map);
      map.fitBounds(routeLine.getBounds());

    } catch (error) {
      console.error("Routing error:", error);
      alert("‚ùå Routing failed. Check your API key or internet connection.");
    }
  }
</script>

</body>
</html>
